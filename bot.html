<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <link rel="stylesheet" href="fontawesome/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet"> <!-- https://fonts.google.com/ -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <link href="css/style.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    <title>BotBeneficios</title>
  </head>
<body style="zoom:70%;">
    <style media="screen">
    p, span {
    color: black;
    font-size: 20px;
}
    .btn-robot{
      position:fixed;
      width:60px;
      height:60px;
      line-height: 63px;
      bottom:25px;
      right:25px;
      background:#25d6;
      color:#FFF;
      border-radius:50px;
      text-align:center;
      font-size:35px;
      box-shadow: 0px 1px 10px rgba(0,0,0,0.3);
      z-index:100;
      transition: all 300ms ease;
      }
      .btn-robot:hover{
          background: #25d6;
      }
      @media only screen and (min-width:320px) and (max-width:768px){
          .btn-robot{
              width:63px;
              height:63px;
              line-height: 66px;
        }
      }
      #webchat {
          position: fixed;
          height:  800px;
          width: 800px;
          transform: translateX(270px);
          overflow: hidden;
          background-image: url(img/animLogo2.gif);
          background-size: cover;
          border-radius: 15px;
          background-repeat: no-repeat;
      }
      .main {
          margin: 18px;
          border-radius: 4px;
      }
      #fondoimg{
        background-image: url(img/fondowonni.gif);
        background-repeat: no-repeat;
        background-size: cover;
        border-radius: 15px;
      }
    </style>
    <header class="tm-header" id="tm-header">
          <div class="tm-header-wrapper">
              <button class="navbar-toggler" type="button" aria-label="Toggle navigation">
                  <i class="fas fa-bars"></i>
              </button>
              <div class="tm-site-header">
                  <img src="img/tarjeta.jpg" href="inicio.html" width="250px" >
              </div>
              <nav class="tm-nav" id="tm-nav">
                  <ul>
                      <li class="tm-nav-item active"><a href="inicio.html" class="tm-nav-link">
                          <i class="fas fa-home"></i>
                          Inicio
                      </a></li>

                      <li class="tm-nav-item"><a href="inicio.html" class="tm-nav-link">
                          <i class="fas fa-pen"></i>
                          Movimientos
                      </a></li>
                      <li class="tm-nav-item"><a href="inicio.html" class="tm-nav-link">
                          <i class="fas fa-users"></i>
                          Pagar Cuenta
                      </a></li>
                      <li class="tm-nav-item"><a href="inicio.html" class="tm-nav-link">
                          <i class="far fa-comments"></i>
                          PAT
                      </a></li>
                  </ul>
              </nav>
              <a type="button" class="btn-robot" data-bs-toggle="modal" data-bs-target="#staticBackdrop">
                <i class="fa fa-robot icono"></i>
              </a>

      </header>
      <br><br><br><br>
      <!--<p align="center"><iframe src="https://powerva.microsoft.com/api/botmanagement/v1/directline/directlinetoken?botId=d24f7443-442d-45f0-ae96-3f05f6e307c6" frameborder="1" style="width: 550px; height: 650px;"></iframe></p>-->
      <div class="mx-auto">
        <div class="row">
          <div class="col-md-3"></div>
          <div class="col-md-6" style="width:1000px; height:900px; border: 15px;" id="fondoimg">
        <div>
            <div class="heading">

                <!-- Change the h1 text to change the bot name -->
                <h1>GleenIA</h1>

            </div>
            <div id="webchat" role="main"></div>
        </div>
      <script src="https://cdn.botframework.com/botframework-webchat/latest/webchat.js"></script>
      <script>
             
            // Set  the CSS rules.
            const styleSet = window.WebChat.createStyleSet({
                bubbleBackground: 'rgba(0, 0, 255, .1)',
                bubbleFromUserBackground: 'rgba(0, 255, 0, .1)',
                rootHeight: '100%',
                rootWidth: '50%',
                backgroundColor: 'paleturquoise'
              });

              // After generated, you can modify the CSS rules.
              // Change font family and weight. 
              styleSet.textContent = {
                ...styleSet.textContent,
                fontFamily: "'Comic Sans MS', 'Arial', sans-serif",
                fontWeight: 'bold'
              };

            // Set the avatar options. 
            const avatarOptions = {
                botAvatarInitials: 'BF',
                userAvatarInitials: 'WC'
                };

            window.WebChat.renderWebChat({
              directLine: window.WebChat.createDirectLine({
                  token: BOT_ID}),
              styleSet,
              styleOptions: avatarOptions
            }, document.getElementById('webchat'));
            
                
                    const styleOptions = {
                      // Add styleOptions to customize web chat canvas
                      hideUploadButton: true
            };

            // Add your BOT ID below
            var BOT_ID = "d24f7443-442d-45f0-ae96-3f05f6e307c6";

            var theURL = "https://powerva.microsoft.com/api/botmanagement/v1/directline/directlinetoken?botId=" + BOT_ID;

            const store = window.WebChat.createStore(
               {},
               ({ dispatch }) => next => action => {
                   if (action.type === "DIRECT_LINE/CONNECT_FULFILLED") {
                      dispatch({
                          meta: {
                               method: "keyboard",
                           },
                           payload: {
                               activity: {
                                     channelData: {
                                          postBack: true,
                                     },
                                      //Web Chat will show the 'Greeting' System Topic message which has a trigger-phrase 'hello'
                                      name: 'startConversation',
                                      type: "event"
                                 },
                            },
                            type: "DIRECT_LINE/POST_ACTIVITY",
                       });
                 }
                 return next(action);
              }
           );
           fetch(theURL)
                .then(response => response.json())
                .then(conversationInfo => {
                    window.WebChat.renderWebChat(
                        {
                            directLine: window.WebChat.createDirectLine({
                                token: conversationInfo.token,
                            }),
                            store: store,
                            styleOptions: styleOptions
                        },
                        document.getElementById('webchat')
                    );
                })
                .catch(err => console.error("An error occurred: " + err));
        </script>
      </div>
      <div class="col-md-3"></div>
        </div>
      </div>

      <!-- Modal -->
      <div class="modal fade" id="staticBackdrop" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="staticBackdropLabel">Bienvenido a GlennIA</h5>
              <button type="button" class="btn-close btn-danger" data-bs-dismiss="modal" aria-label="Close">&nbsp X &nbsp</button>
            </div>
            <div id="webchat" class="modal-body">
              <div class="bot" align="center"><iframe src="https://web.powerva.microsoft.com/environments/Default-32ec166b-1a21-4953-815b-bc8456ead53c/bots/new_bot_d24f7443442d45f0ae963f05f6e307c6/webchat" frameborder="1" 
              style="width: 450px; height: 450px;
                "></iframe></div>
            </div>
          </div>
        </div>
      </div>

      <script src="https://kit.fontawesome.com/eb496ab1a0.js" crossorigin="anonymous"></script>
  </body>
</html>
